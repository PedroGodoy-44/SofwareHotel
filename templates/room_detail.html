{% extends "base.html" %}
{% block title %}Quarto {{ room.number }} - {{ super() }}{% endblock %}

{% block content %}
<div class="flex items-center mb-4">
  <h1 class="text-xl font-semibold">Quarto {{ room.number }}</h1>
  <a href="{{ url_for('new_booking', room_id=room.id) }}" class="ml-auto inline-block px-3 py-2 bg-slate-900 text-white rounded-xl shadow">Reservar este quarto</a>
</div>
<div class="bg-white rounded-2xl shadow p-4 mb-6">
  <div class="flex gap-6">
    <div><div class="text-sm opacity-60">Tipo</div><div class="font-semibold">{{ room.room_type }}</div></div>
    <div><div class="text-sm opacity-60">Diária</div><div class="font-semibold">R$ {{ '%.2f'|format(room.rate) }}</div></div>
    <div><div class="text-sm opacity-60">Status</div><div class="text-xs inline-block px-2 py-1 rounded {{ STATUS_BADGE[st] }}">{{ st }}</div></div>
  </div>
</div>
<h2 class="mt-6 mb-2 font-semibold">Últimas reservas</h2>
<div class="bg-white shadow rounded-2xl overflow-hidden">
  <table class="w-full text-sm">
    <thead class="bg-slate-100"><tr><th class="p-2 text-left">Período</th><th class="p-2 text-left">Hóspede</th><th class="p-2 text-left">Status</th><th></th></tr></thead>
    <tbody>
    {% for b in recent %}
      <tr class="border-t">
        <td class="p-2">{{ b.check_in.strftime('%d/%m/%Y') }} → {{ b.check_out.strftime('%d/%m/%Y') }}</td>
        <td class="p-2">{{ b.guest.name }}</td>
        <td class="p-2">{{ b.status }}</td>
        <td class="p-2"><a class="underline" href="{{ url_for('booking_detail', booking_id=b.id) }}">Abrir</a></td>
      </tr>
    {% else %}
      <tr><td class="p-2" colspan="4">Sem histórico.</td></tr>
    {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}